# Googleアプリパスワード設定ガイド

## 🔑 アプリパスワードとは

アプリパスワードは、2段階認証を有効にしたGoogleアカウントで、アプリから安全にアクセスするための16桁の専用パスワードです。

## 📋 設定手順

### 1. 2段階認証を有効化

まず、Googleアカウントで2段階認証が有効になっている必要があります。

1. [Google アカウント](https://myaccount.google.com/)にアクセス
2. 左側メニューの「セキュリティ」をクリック
3. 「2段階認証プロセス」をクリック
4. 指示に従って2段階認証を設定

### 2. アプリパスワードを生成

2段階認証が有効になったら、アプリパスワードを作成します。

1. [Google アカウント](https://myaccount.google.com/)の「セキュリティ」へ
2. 「2段階認証プロセス」の下にある「アプリパスワード」をクリック
3. 「アプリを選択」で「その他（カスタム名）」を選択
4. 名前を入力（例：「Auto Podcast」）
5. 「生成」をクリック

### 3. 16桁のパスワードをコピー

生成された16桁のアプリパスワード（例：`abcd efgh ijkl mnop`）をコピーします。

⚠️ **重要**: このパスワードは一度しか表示されません。安全な場所に保存してください。

## 🔧 GitHub Secrets設定

生成したアプリパスワードをGitHub Secretsに設定します。

### 設定方法

1. GitHubリポジトリ → Settings → Secrets and variables → Actions
2. 「New repository secret」をクリック
3. 以下のSecretsを追加:

#### Secret 1: GOOGLE_ACCOUNT_EMAIL
- **Name**: `GOOGLE_ACCOUNT_EMAIL`
- **Secret**: あなたのGmailアドレス（例：`your-email@gmail.com`）

#### Secret 2: GOOGLE_ACCOUNT_PASSWORD
- **Name**: `GOOGLE_ACCOUNT_PASSWORD`
- **Secret**: 生成した16桁のアプリパスワード（例：`abcdefghijklmnop`）
- ⚠️ **注意**: スペースは除去して入力

#### Secret 3: PODCAST_BASE_URL
- **Name**: `PODCAST_BASE_URL`
- **Secret**: `https://necoha.github.io/auto-podcast`

## ✅ 設定確認

以下3つのSecretsが設定されていることを確認:

- ✅ `GOOGLE_ACCOUNT_EMAIL`
- ✅ `GOOGLE_ACCOUNT_PASSWORD` (16桁のアプリパスワード)
- ✅ `PODCAST_BASE_URL`

## 🔒 セキュリティのベストプラクティス

### ✅ 推奨事項
- アプリパスワードは定期的に再生成
- 不要になったアプリパスワードは削除
- アプリパスワードを他人と共有しない
- GitHub Secretsに正しく保存

### ❌ 避けるべきこと
- 通常のGoogleパスワードを使用
- アプリパスワードをコードに直接記載
- パブリックリポジトリにアプリパスワードをcommit

## 🚨 トラブルシューティング

### よくある問題

**1. ログインエラーが発生する**
- アプリパスワードが正しく生成されているか確認
- スペースを除去した16桁で入力されているか確認
- 2段階認証が有効になっているか確認

**2. アプリパスワードのオプションが表示されない**
- 2段階認証が有効になっているか再確認
- 会社のGoogleアカウントの場合、管理者権限が必要な場合があります

**3. GitHub Actions実行時にエラー**
- Secret名が正確に設定されているか確認
- Secret値にスペースや特殊文字が含まれていないか確認

### エラー解決手順

1. **アプリパスワードを再生成**
   - 古いアプリパスワードを削除
   - 新しいアプリパスワードを生成
   - GitHub Secretsを更新

2. **GitHub Actions ログ確認**
   - Actions タブでエラーログを確認
   - 認証関連のエラーメッセージを検索

3. **手動テスト**
   - ローカル環境で `.env` ファイルを作成
   - 手動実行でアプリパスワードをテスト

## 📞 サポート

問題が解決しない場合:
1. GitHub Issues でエラーログを報告
2. アプリパスワードの再生成を試行
3. 他の認証方法（セッションCookie）を検討

## 🔄 アプリパスワード管理

### 定期メンテナンス
- 3-6ヶ月ごとにアプリパスワードを更新
- 使用していないアプリパスワードを削除
- セキュリティアラートを監視

### バックアップ戦略
- 複数のアプリパスワードを生成（本番用・テスト用）
- 緊急時用のバックアップ認証方法を準備